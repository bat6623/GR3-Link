# GR3 Link - 使用說明書

> Ricoh GR III 相機的 PWA 伴侶應用程式  
> 版本：v1.2.6 | 最後更新：2026-02-01

---

## 📱 快速開始

### 安裝 App

1. 使用手機瀏覽器開啟：`https://bat6623.github.io/GR3-Link/`
2. 點擊瀏覽器選單中的「加入主畫面」或「安裝」
3. App 圖示會出現在您的主畫面上

### 首次使用

1. 開啟 App，會看到 GR3 Link 的開機動畫
2. 點擊 **Connect** 按鈕
3. 根據連線結果：
   - ✅ **成功**：進入照片瀏覽模式
   - ⚠️ **失敗**：自動切換到 Demo 模式（可測試 UI）

---

## 🔌 連線 GR3 相機

### 準備工作

1. **開啟 GR3 的 Wi-Fi**
   - 在相機上進入設定 → 無線通訊 → Wi-Fi
   - 啟用 Wi-Fi 功能

2. **連接 Wi-Fi 網路**
   - 手機連接到 GR3 的 Wi-Fi（網路名稱通常為 `GR_XXXX`）
   - 密碼可在相機螢幕上查看

### 連線步驟

#### 📱 Android 用戶 (Chrome/Edge)

1. 開啟 GR3 Link App
2. 點擊 **Connect** 按鈕
3. 如果出現「Mixed Content Error」警告：
   - 點擊網址列旁的 **🔒 鎖頭圖示**
   - 選擇「網站設定」
   - 找到「不安全內容 (Insecure Content)」
   - 改為 **允許 (Allow)**
   - 重新整理頁面，再次點擊 Connect

#### 📱 iOS 用戶 (Safari)

由於 iOS 的安全性限制較嚴格，通常無法允許 Mixed Content。建議：
- 將此 App 作為「濾鏡筆記本」使用（Recipes 功能不需連線）
- 或在電腦上使用 HTTP 環境測試

### 連線狀態指示

- 🔴 **Wait...** - 尚未連線
- 🟢 **Connected** - 已成功連線
- 🔴 **Disconnected** - 連線失敗或中斷

---

## 🖼️ 功能說明

### 1. Photos（照片瀏覽）

**功能**：
- 瀏覽 GR3 相機中的所有照片
- 點擊照片可開啟大圖預覽
- 下載原始檔案到手機

**使用方式**：
1. 確保已連線到 GR3
2. 點擊底部導航列的「Photos」
3. 照片會以網格方式顯示
4. 點擊任一照片進入 Lightbox 模式
5. 在 Lightbox 中可以：
   - 查看大圖
   - 點擊「Download Original」下載原檔

**Demo 模式**：
- 如果無法連線，會自動顯示範例照片
- 用於測試 UI 和操作流程

### 2. Recipes（濾鏡參數筆記本）

**功能**：
- 儲存您喜愛的 GR3 濾鏡參數組合
- 快速查閱不同場景的設定值
- 資料儲存在本地，不會遺失

**使用方式**：

#### 新增濾鏡參數
1. 點擊底部導航列的「Recipes」
2. 點擊右上角的「+ New」按鈕
3. 填寫資訊：
   - **Name**：參數組合名稱（例如：「夜景高對比」）
   - **Base Effect**：基礎濾鏡（Positive Film、Negative Film 等）
   - **參數調整**：
     - Saturation（飽和度）：-4 ~ +4
     - Hue（色調）：-4 ~ +4
     - High/Low Key（明暗調）：-4 ~ +4
     - Contrast（對比度）：-4 ~ +4
4. 點擊「Save Recipe」儲存

#### 編輯/刪除
- **編輯**：點擊任一參數卡片即可修改
- **刪除**：點擊卡片中的「Delete」按鈕

### 3. Settings（設定）

**功能**：
- 查看連線狀態
- 手動重新連線
- 強制更新 App

**重要功能**：

#### Force Update & Reset App
- 用途：清除所有快取，強制重新載入最新版本
- 使用時機：
  - App 行為異常
  - 更新後沒有變化
  - 按鈕無反應
- 操作：點擊紅色按鈕 → 確認 → 自動重新載入

---

## 🔧 常見問題排除

### Q1: 點擊 Connect 沒有反應

**解決方案**：
1. 確認版本號是否為 `v1.2.6` 或更新
2. 強制重新整理頁面（Ctrl+Shift+R 或 Cmd+Shift+R）
3. 到 Settings 頁面點擊「Force Update & Reset App」
4. 刪除 App 後重新安裝

### Q2: 出現「Mixed Content Error」

**原因**：瀏覽器阻擋 HTTPS 網頁存取 HTTP 相機

**解決方案**：
- **Android**：依照上述「連線步驟」允許不安全內容
- **iOS**：目前無解，建議使用 Recipes 功能

### Q3: 手機自動斷開 GR3 Wi-Fi

**原因**：手機偵測到 GR3 Wi-Fi 無法連接網際網路，自動切回 4G/5G

**解決方案**：
1. 進入手機的 Wi-Fi 設定
2. 找到 GR3 的 Wi-Fi 網路
3. 關閉「智慧網路切換」或「自動切換行動數據」
4. 或設定為「保持連線」

### Q4: 照片無法載入

**檢查項目**：
1. 確認已連線到 GR3 Wi-Fi
2. 確認連線狀態顯示為「Connected」
3. 確認相機的 Wi-Fi 功能已開啟
4. 嘗試點擊 Settings 中的「Reconnect」

### Q5: App 版本沒有更新

**解決方案**：
1. 刪除桌面上的 App
2. 用瀏覽器開啟網址
3. 清除瀏覽器快取（設定 → Safari/Chrome → 清除瀏覽記錄）
4. 強制重新整理
5. 確認版本號後重新安裝

---

## 💡 使用技巧

### 離線使用
- Recipes 功能完全離線可用
- 已下載的照片會儲存在手機相簿中
- Service Worker 會快取 App 介面，即使離線也能開啟

### 最佳實踐
1. **拍攝前記錄參數**：在 Recipes 中建立常用的濾鏡設定
2. **定期備份照片**：透過 Photos 功能下載重要照片
3. **保持 App 更新**：定期檢查版本號，使用 Force Update 功能

### 效能優化
- 照片網格採用縮圖載入，節省流量
- 大圖預覽採用延遲載入
- Service Worker 快取靜態資源，加快開啟速度

---

## 🛠️ 技術資訊

### 系統需求
- **瀏覽器**：Chrome 90+、Safari 14+、Edge 90+
- **作業系統**：iOS 14+、Android 8+
- **網路**：需連接 GR3 Wi-Fi（192.168.0.1）

### PWA 特性
- ✅ 可安裝到主畫面
- ✅ 離線可用（UI 部分）
- ✅ 自動更新檢查
- ✅ 原生 App 般的體驗

### 資料儲存
- **Recipes**：儲存在瀏覽器 localStorage
- **照片**：不會自動儲存，需手動下載
- **快取**：由 Service Worker 管理

---

## 📞 支援與回饋

### 版本資訊
- **當前版本**：v1.2.6 (Path Fix)
- **專案位置**：`https://github.com/bat6623/GR3-Link`
- **線上網址**：`https://bat6623.github.io/GR3-Link/`

### 已知限制
1. iOS Safari 無法繞過 Mixed Content 限制
2. 需要手動連接 GR3 Wi-Fi
3. 無法遠端控制相機拍攝（僅瀏覽照片）

### 更新日誌

#### v1.2.6 (2026-02-01)
- 🔧 修復 JavaScript 路徑錯誤（關鍵修復）
- ✅ Connect 按鈕現已正常運作

#### v1.2.5 (2026-02-01)
- 🔧 移除衝突的事件監聽器
- ✅ 整合連線邏輯到 UI 管理器

#### v1.2.4 (2026-02-01)
- ✨ 新增 Force Update & Reset App 功能
- ✨ 啟動時自動檢查更新

#### v1.2.3 (2026-02-01)
- 🔧 修復 PWA 觸控事件問題
- ✅ 改用標準 click 事件

#### v1.2.2 (2026-02-01)
- 📱 修復手機版面適配問題
- ✅ 使用 dvh 單位和 safe-area

---

## 📄 授權

本專案為個人學習專案，僅供參考使用。

**免責聲明**：本 App 為非官方工具，與 Ricoh 公司無關。使用時請遵守相機使用條款。
